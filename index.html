<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Hawking Radiation Simulation</title>
<style>
  body {
    background: black;
    color: white;
    font-family: sans-serif;
    text-align: center;
  }
  #scene {
    background: black;
    border: 1px solid white;
    margin-top: 10px;
  }
  .bar {
    height: 20px;
    background: red;
    transition: width 0.1s linear;
  }
  .bar-container {
    width: 300px;
    border: 1px solid white;
    background: gray;
    margin: 5px auto;
  }
</style>
</head>
<body>

<h2>ホーキング放射シミュレーション</h2>
<p>赤い粒子＝正のエネルギー（外へ）／青い粒子＝負のエネルギー（内側へ）</p>

<!-- SVG表示領域 -->
<svg id="scene" width="500" height="300">
    <!-- 事象の地平面 -->
    <circle id="bh" cx="150" cy="150" r="50" fill="none" stroke="white" stroke-width="2" />
    <!-- 正のエネルギー粒子 -->
    <circle id="positive" cx="200" cy="150" r="5" fill="red" />
    <!-- 負のエネルギー粒子 -->
    <circle id="negative" cx="100" cy="150" r="5" fill="blue" />
</svg>

<h3>ブラックホール質量</h3>
<div class="bar-container">
  <div id="mass-bar" class="bar"></div>
</div>
<p id="mass-label"></p>

<h3>放射されたエネルギー</h3>
<div class="bar-container">
  <div id="energy-bar" class="bar" style="background: orange;"></div>
</div>
<p id="energy-label"></p>

<script>
let posX = 200; // 正エネ粒子の位置
let negX = 100; // 負エネ粒子の位置
let mass = 100; // ブラックホールの初期質量（任意単位）
let energy = 0; // 放射されたエネルギー

function resetParticles() {
    posX = 200;
    negX = 100;
}

function animate() {
    posX += 2;   // 正のエネルギー粒子は外向き
    negX -= 2;   // 負のエネルギー粒子は内向き

    document.getElementById("positive").setAttribute("cx", posX);
    document.getElementById("negative").setAttribute("cx", negX);

    // 粒子が画面外に行ったら質量減少を反映してリセット
    if (posX > 500) {
        energy += 1;
        mass -= 1;
        if (mass < 0) mass = 0;
        updateBars();
        resetParticles();
    }

    requestAnimationFrame(animate);
}

function updateBars() {
    let massPercent = mass;   // 100を最大とする%
    let energyPercent = energy;

    document.getElementById("mass-bar").style.width = massPercent * 3 + "px";
    document.getElementById("energy-bar").style.width = energyPercent * 3 + "px";

    document.getElementById("mass-label").textContent = "質量: " + mass.toFixed(0);
    document.getElementById("energy-label").textContent = "放射エネルギー: " + energy.toFixed(0);
}

// 初期化
updateBars();
animate();
</script>

</body>
</html>
